(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["contact"],{"3b58":function(e,t,a){"use strict";var s=a("7bf9"),i=a.n(s);i.a},"46e0":function(e,t,a){e.exports=a.p+"img/girlChose.36823e03.png"},"7bf9":function(e,t,a){},b262:function(e,t,a){e.exports=a.p+"img/manChose.809fc99e.png"},b6ae:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cantactPage"},[e.formInfo!=={}?a("div",{staticClass:"cantacHeader"},[a("img",{attrs:{src:e.formInfo.headpic}}),a("span",[e._v(e._s(e.formInfo.username))])]):e._e(),a("div",{staticClass:"cantacMain"},[a("div",{staticClass:"cantacContent"},[a("div",{staticClass:"userInfoDiv"},[a("el-form",{ref:"ruleForm",attrs:{model:e.formInfo,"label-position":"top","label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"真实姓名"}},[a("el-input",{attrs:{placeholder:"请输入真实姓名"},model:{value:e.trueName,callback:function(t){e.trueName=t},expression:"trueName"}})],1),a("el-form-item",{staticClass:"disabledInput",attrs:{label:"性别",disabled:""}},[a("ul",{staticClass:"sexUl"},[e.choseSex?a("li",[a("img",{attrs:{src:e.sexMan}}),a("span",[e._v("男")])]):a("li",[a("img",{attrs:{src:e.sexGirl}}),a("span",[e._v("女")])])])]),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{type:"number",max:11,placeholder:"请填写正确手机号码"},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}})],1),a("el-form-item",{attrs:{label:"身份证号码"}},[a("el-input",{attrs:{placeholder:"请填写正确的身份证号码"},model:{value:e.ID,callback:function(t){e.ID=t},expression:"ID"}})],1),a("el-form-item",{staticClass:"upload",attrs:{label:"请上传防疫行程证"}},[a("el-upload",{staticClass:"upload-demo",attrs:{id:"uploadimg",action:"http://kaoyafront.huikaoedu.com/api/uploadUser","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.handelUploadSuccess,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1)],1)]),a("input",{staticClass:"preserve",attrs:{type:"button",value:"保存"},on:{click:function(t){return e.submitForm("ruleForm")}}})])])},i=[],n=a("d399"),o={data:function(){return{fileList:[],formInfo:{},ID:"",trueName:"",email:"",tel:"",choseSex:!0,sexMan:a("b262"),sexGirl:a("46e0"),checkTel:"请输入你的手机号码",fanyi:null}},created:function(){var e=this;this.axios.get("/api/user/info").then(function(t){0===t.data.code&&(console.log("result.data.data:",t.data.data),e.formInfo=t.data.data,null===e.formInfo.tel&&(e.checkTel="暂无手机号码"),null!==t.data.data.user_private_info&&(e.ID=t.data.data.user_private_info.ID,e.trueName=t.data.data.user_private_info.trueName,e.email=t.data.data.user_private_info.email),e.tel=t.data.data.tel,"男"===t.data.data.sex?e.choseSex=!0:e.choseSex=!1,console.log("contact:",e.formInfo))}).catch(function(t){e.$notify("ERR: 网络错误！数据获取失败")})},methods:{handelUploadSuccess:function(e,t,a){this.fanyi=e},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){},handleExceed:function(e,t){this.$message.warning("只能上传一次文件，请先删除文件,点击文件后可删除")},beforeRemove:function(e,t){},submitForm:function(e){var t=this;if(""!==this.trueName&&""!==this.ID&&""!==this.tel&&this.fanyi){var a={trueName:this.trueName,ID:this.ID,email:this.email,fanyi:this.fanyi};this.axios.post("api/user/updateinfo",{user_private_info:a,tel:this.tel}).then(function(e){console.log(e),n["a"].success("保存成功"),setTimeout(function(){t.$router.push({path:"/mine"})},1e3)}).catch(function(e){n["a"].success("保存失败")})}else n["a"].success("请输入完整信息")}}},l=o,r=(a("3b58"),a("2877")),c=Object(r["a"])(l,s,i,!1,null,"3d9ae0be",null);t["default"]=c.exports}}]);