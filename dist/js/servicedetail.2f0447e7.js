(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["servicedetail"],{"11e9":function(e,t,i){var s=i("52a7"),a=i("4630"),r=i("6821"),c=i("6a99"),n=i("69a8"),o=i("c69a"),l=Object.getOwnPropertyDescriptor;t.f=i("9e1e")?l:function(e,t){if(e=r(e),t=c(t,!0),o)try{return l(e,t)}catch(i){}if(n(e,t))return a(!s.f.call(e,t),e[t])}},"1ac5":function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.serviceDetail?s("div",{staticClass:"container"},[e.success?s("div",{staticClass:"success clearfix"},[s("van-icon",{attrs:{name:"passed"}}),s("span",[e._v("购买成功")])],1):e._e(),s("van-card",{staticClass:"van-card",attrs:{num:e.serviceDetail.num,price:e.serviceDetail.amount/e.serviceDetail.num,desc:e.serviceDetail.describe,title:e.serviceDetail.item_good_name,thumb:e.serviceDetail.img}},[s("div",{attrs:{slot:"footer"},slot:"footer"},[s("span",{staticClass:"count"},[e._v("共"+e._s(e.serviceDetail.num)+"件")]),s("span",{staticClass:"strong"},[e._v("合计：")]),s("span",{staticClass:"price-red"},[e._v("￥"+e._s(e.serviceDetail.amount))])])]),s("div",{staticClass:"verification-code"},[s("div",{staticClass:"pic"},[s("div",{staticClass:"QRCheck"},[s("div",[s("img",{staticClass:"QRImg",attrs:{src:e.serviceDetail.qrcodeurl}}),e.afterMask?s("div",{staticClass:"QRMask"}):e._e()]),e.afterQR?s("img",{staticClass:"afterUse",attrs:{src:i("8f9b")}}):e._e(),e.loseQR?s("img",{staticClass:"afterUse",attrs:{src:i("eee1")}}):e._e()]),s("div",{staticClass:"tag"},[1===e.serviceDetail.use_status?s("span",{staticClass:"iconfont iconused"}):e._e(),2===e.serviceDetail.use_status?s("span",{staticClass:"iconfont iconexpired"}):e._e()])]),s("div",{staticClass:"valid-time"},[s("div",[e._v("兑换码有效期至"),s("span",[e._v(e._s(e.serviceDetail.dismiss_time))])]),s("div",[e._v("逾期将失效，请及时兑换")])])]),s("div",{staticClass:"exchange"},[s("div",[e._v("兑换地点： ")]),s("div",{staticClass:"exchangeDiv"},[e.serviceDetail.biz?s("span",[e._v(e._s(e.serviceDetail.biz.biz_name))]):e._e(),s("img",{attrs:{src:i("9076")},on:{click:e.openLocation}})])]),s("div",{staticClass:"order"},[s("div",{staticClass:"orderFlex"},[s("span",[e._v("订单编号：")]),s("span",{attrs:{id:"orderNumber"}},[e._v(e._s(e.serviceDetail.order_id))])]),s("div",{staticClass:"orderFlex"},[s("span",[e._v("订单总额： ")]),s("span",[e._v("￥"+e._s(e.serviceDetail.amount))])])]),e.serviceDetail.biz?s("div",{staticClass:"contact"},[s("div",{staticClass:"contactFlex"},[s("div",[e._v("联系商家： ")]),s("div",[e._v(e._s(e.serviceDetail.biz.biz_tel))])]),e._m(0)]):e._e(),e.isLoading?s("van-loading",{attrs:{type:"spinner",color:"white"}}):e._e()],1):e._e()},a=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"contactFlex"},[i("div",[e._v("工作时间： ")]),i("div",[e._v("2019年6月15日 7:30至16:30")])])}],r=(i("c5f6"),i("28a5"),i("27ae")),c=i.n(r),n={name:"ServiceDetail",data:function(){return{serviceId:null,serviceDetail:{},status:0,success:null,isLoading:!1,afterQR:!1,loseQR:!1,afterMask:!1}},created:function(){this.serviceId=this.$route.query.service_id,this.success=this.$route.query.type,this.getServiceDetail(this.serviceId)},methods:{initWx:function(){var e=this,t="api/wechat/getjssdk?url="+c.a.Base64.encode(location.href.split("#")[0]);return this.axios.get(t).then(function(t){t=t.data,e.wx.config({debug:!1,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["openLocation"]})}).catch(function(t){e.$notify("获取微信授权失败")})},getServiceDetail:function(e){var t=this,i="/api/service/servicedetail?service_id="+e;this.axios.get(i).then(function(e){e=e.data,0===e.code?(t.serviceDetail=e.data,t.serviceDetail.qrcodeurl="data:image/png;base64,".concat(t.serviceDetail.qrcodeurl),console.log(t.serviceDetail),1===t.serviceDetail.use_status?(t.afterQR=!0,t.afterMask=!0):2===t.serviceDetail.use_status&&(t.afterQR=!0,t.afterMask=!0)):t.$notify(e.msg)}).catch(function(e){})},openLocation:function(){var e=this,t=this;this.isLoading=!0,this.initWx().then(function(i){e.wx.openLocation({longitude:Number(e.serviceDetail.biz.biz_lng),latitude:Number(e.serviceDetail.biz.biz_lat),success:function(){t.isLoading=!1}})})}}},o=n,l=(i("e409"),i("2877")),u=Object(l["a"])(o,s,a,!1,null,"e21a8ee4",null);t["default"]=u.exports},"4aee":function(e,t,i){},"5dbc":function(e,t,i){var s=i("d3f4"),a=i("8b97").set;e.exports=function(e,t,i){var r,c=t.constructor;return c!==i&&"function"==typeof c&&(r=c.prototype)!==i.prototype&&s(r)&&a&&a(e,r),e}},"8b97":function(e,t,i){var s=i("d3f4"),a=i("cb7c"),r=function(e,t){if(a(e),!s(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,s){try{s=i("9b43")(Function.call,i("11e9").f(Object.prototype,"__proto__").set,2),s(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,i){return r(e,i),t?e.__proto__=i:s(e,i),e}}({},!1):void 0),check:r}},"8f9b":function(e,t,i){e.exports=i.p+"img/afterUse.abca2de4.png"},9076:function(e,t,i){e.exports=i.p+"img/location.b35b4e5e.png"},9093:function(e,t,i){var s=i("ce10"),a=i("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return s(e,a)}},aa77:function(e,t,i){var s=i("5ca1"),a=i("be13"),r=i("79e5"),c=i("fdef"),n="["+c+"]",o="​",l=RegExp("^"+n+n+"*"),u=RegExp(n+n+"*$"),v=function(e,t,i){var a={},n=r(function(){return!!c[e]()||o[e]()!=o}),l=a[e]=n?t(f):c[e];i&&(a[i]=l),s(s.P+s.F*n,"String",a)},f=v.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(u,"")),e};e.exports=v},c5f6:function(e,t,i){"use strict";var s=i("7726"),a=i("69a8"),r=i("2d95"),c=i("5dbc"),n=i("6a99"),o=i("79e5"),l=i("9093").f,u=i("11e9").f,v=i("86cc").f,f=i("aa77").trim,d="Number",p=s[d],_=p,g=p.prototype,h=r(i("2aeb")(g))==d,m="trim"in String.prototype,b=function(e){var t=n(e,!1);if("string"==typeof t&&t.length>2){t=m?t.trim():f(t,3);var i,s,a,r=t.charCodeAt(0);if(43===r||45===r){if(i=t.charCodeAt(2),88===i||120===i)return NaN}else if(48===r){switch(t.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+t}for(var c,o=t.slice(2),l=0,u=o.length;l<u;l++)if(c=o.charCodeAt(l),c<48||c>a)return NaN;return parseInt(o,s)}}return+t};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof p&&(h?o(function(){g.valueOf.call(i)}):r(i)!=d)?c(new _(b(t)),i,p):b(t)};for(var D,C=i("9e1e")?l(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;C.length>x;x++)a(_,D=C[x])&&!a(p,D)&&v(p,D,u(_,D));p.prototype=g,g.constructor=p,i("2aba")(s,d,p)}},e409:function(e,t,i){"use strict";var s=i("4aee"),a=i.n(s);a.a},eee1:function(e,t,i){e.exports=i.p+"img/loseQR.ea5f6e79.png"},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);