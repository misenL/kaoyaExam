(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fac388fc"],{"22a2":function(t,e,s){"use strict";var i=s("4383"),n=s.n(i);n.a},4383:function(t,e,s){},7007:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",[s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("姓名：")]),s("div",{staticClass:"unit__result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result.name,expression:"result.name"}],staticClass:"unit__input",attrs:{type:"text",placeholder:"请输入姓名"},domProps:{value:t.result.name},on:{input:function(e){e.target.composing||t.$set(t.result,"name",e.target.value)}}})])]),s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("性别：")]),s("div",{staticClass:"unit__result"},[s("van-radio-group",{attrs:{"icon-size":".4rem"},model:{value:t.result.sex,callback:function(e){t.$set(t.result,"sex",e)},expression:"result.sex"}},[s("van-radio",{attrs:{name:"男"}},[t._v("男")]),s("van-radio",{attrs:{name:"女"}},[t._v("女")])],1)],1)]),s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("身份：")]),s("div",{staticClass:"unit__result"},[s("van-cell",{attrs:{"is-link":""},on:{click:t.showIdentityPopup}},[t._v(t._s(t.identitiesText))]),s("van-popup",{attrs:{position:"bottom"},model:{value:t.showIdentities,callback:function(e){t.showIdentities=e},expression:"showIdentities"}},[s("van-picker",{attrs:{columns:t.identities,"show-toolbar":!0,"default-index":0},on:{confirm:t.onIdentityConfirm}})],1)],1)]),s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v(t._s(t.isNotAtSchool)+"学校：")]),s("div",{staticClass:"unit__result"},[s("van-cell",{attrs:{"is-link":""},on:{click:t.showSchoolPopup}},[t._v(t._s(t.schoolText))]),s("van-popup",{attrs:{position:"bottom"},model:{value:t.showSchools,callback:function(e){t.showSchools=e},expression:"showSchools"}},[s("van-picker",{attrs:{columns:t.schools,"show-toolbar":!0,"default-index":0},on:{confirm:t.onSchoolConfirm}})],1)],1)]),t.result.identity&&"在校生"!==t.result.identity?t._e():s("div",[s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("学历：")]),s("div",{staticClass:"unit__result"},[s("van-cell",{attrs:{"is-link":""},on:{click:t.showEduBgPopup}},[t._v(t._s(t.eduBgText))]),s("van-popup",{attrs:{position:"bottom"},model:{value:t.showEduBgs,callback:function(e){t.showEduBgs=e},expression:"showEduBgs"}},[s("van-picker",{attrs:{columns:t.eduBackgrounds,"show-toolbar":!0},on:{confirm:t.onEduBgConfirm}})],1)],1)]),s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("年级：")]),s("div",{staticClass:"unit__result"},[s("van-cell",{attrs:{"is-link":""},on:{click:t.showGradePopup}},[t._v(t._s(t.gradeText))]),s("van-popup",{attrs:{position:"bottom"},model:{value:t.showGrades,callback:function(e){t.showGrades=e},expression:"showGrades"}},[s("van-picker",{attrs:{columns:t.grades,"show-toolbar":!0},on:{confirm:t.onGradeConfirm}})],1)],1)])]),"教职工"===t.result.identity?s("div",[s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("所属部门：")]),s("div",{staticClass:"unit__result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result.employee_info.department,expression:"result.employee_info.department"}],staticClass:"unit__input",attrs:{type:"text",placeholder:"请输入所属部门"},domProps:{value:t.result.employee_info.department},on:{input:function(e){e.target.composing||t.$set(t.result.employee_info,"department",e.target.value)}}})])]),s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("职位：")]),s("div",{staticClass:"unit__result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result.employee_info.job,expression:"result.employee_info.job"}],staticClass:"unit__input",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.result.employee_info.job},on:{input:function(e){e.target.composing||t.$set(t.result.employee_info,"job",e.target.value)}}})])])]):t._e(),"非校内人员"===t.result.identity?s("div",[s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("推荐人姓名：")]),s("div",{staticClass:"unit__result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result.other_info.recName,expression:"result.other_info.recName"}],staticClass:"unit__input",attrs:{type:"text",placeholder:"请输入推荐人姓名"},domProps:{value:t.result.other_info.recName},on:{input:function(e){e.target.composing||t.$set(t.result.other_info,"recName",e.target.value)}}})])]),s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("推荐人所属：")]),s("div",{staticClass:"unit__result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result.other_info.recDepartment,expression:"result.other_info.recDepartment"}],staticClass:"unit__input",attrs:{type:"text",placeholder:"请输入推荐人所属部门"},domProps:{value:t.result.other_info.recDepartment},on:{input:function(e){e.target.composing||t.$set(t.result.other_info,"recDepartment",e.target.value)}}})])])]):t._e(),s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("手机号：")]),s("div",{staticClass:"unit__result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result.tel,expression:"result.tel"}],staticClass:"unit__input",attrs:{type:"number",placeholder:"请输入手机号",maxlength:"11"},domProps:{value:t.result.tel},on:{input:function(e){e.target.composing||t.$set(t.result,"tel",e.target.value)}}})])]),s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("验证码：")]),s("div",{staticClass:"unit__result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result.code,expression:"result.code"}],staticClass:"unit__input",attrs:{type:"number",placeholder:"请输入验证码",maxlength:"6"},domProps:{value:t.result.code},on:{input:function(e){e.target.composing||t.$set(t.result,"code",e.target.value)}}}),s("van-button",{staticClass:"unit__send-code-btn",attrs:{type:"info",disabled:t.wait},on:{click:t.sendCode}},[t._v(t._s(t.codeHint))])],1)]),s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("身份证号：")]),s("div",{staticClass:"unit__result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result.idNumber,expression:"result.idNumber"}],staticClass:"unit__input",attrs:{type:"text",placeholder:"请输入身份证号"},domProps:{value:t.result.idNumber},on:{input:function(e){e.target.composing||t.$set(t.result,"idNumber",e.target.value)}}})])]),t.result.identity&&"在校生"!==t.result.identity?t._e():s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("学生证号：")]),s("div",{staticClass:"unit__result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result.student_info.studentID,expression:"result.student_info.studentID"}],staticClass:"unit__input",attrs:{type:"number",placeholder:"请输入学生证号"},domProps:{value:t.result.student_info.studentID},on:{input:function(e){e.target.composing||t.$set(t.result.student_info,"studentID",e.target.value)}}})])]),"教职工"===t.result.identity?s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("教职工号：")]),s("div",{staticClass:"unit__result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result.employee_info.workNumber,expression:"result.employee_info.workNumber"}],staticClass:"unit__input",attrs:{type:"text",placeholder:"请输入教职工号"},domProps:{value:t.result.employee_info.workNumber},on:{input:function(e){e.target.composing||t.$set(t.result.employee_info,"workNumber",e.target.value)}}})])]):t._e(),"非校内人员"===t.result.identity?s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("推荐人手机：")]),s("div",{staticClass:"unit__result"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.result.other_info.recPhone,expression:"result.other_info.recPhone"}],staticClass:"unit__input",attrs:{type:"number",placeholder:"必须可打通的推荐人手机号",maxlength:"11"},domProps:{value:t.result.other_info.recPhone},on:{input:function(e){e.target.composing||t.$set(t.result.other_info,"recPhone",e.target.value)}}})])]):t._e(),t._m(0),s("div",{staticClass:"file-upload"},[s("van-uploader",{attrs:{"max-count":2,"preview-image":"","preview-full-image":"","before-read":t.beforeRead,"after-read":t.afterReadID},model:{value:t.imgIDList,callback:function(e){t.imgIDList=e},expression:"imgIDList"}})],1),s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v(t._s(t.cardType))]),s("div",{staticClass:"unit__result unit__img-hint"},[t._v("需要上传正反两面清晰照片(请使用本地图片)")])]),s("div",{staticClass:"file-upload"},[s("van-uploader",{attrs:{"max-count":2,"preview-image":"","preview-full-image":"",accept:"image/*","before-read":t.beforeRead,"after-read":t.afterReadUser},model:{value:t.imgUserList,callback:function(e){t.imgUserList=e},expression:"imgUserList"}})],1)]),s("div",{staticClass:"agree-unit"},[s("van-checkbox",{on:{click:t.a},model:{value:t.agree,callback:function(e){t.agree=e},expression:"agree"}},[s("p",[t._v("我已阅读并同意")])]),s("a",{attrs:{href:"javascript: void(0);"},on:{click:t.showProtocal}},[t._v("《监考网用户协议》")])],1),s("van-popup",{model:{value:t.protocal,callback:function(e){t.protocal=e},expression:"protocal"}},[t._v("内容")]),s("div",{staticClass:"submit-unit"},[s("van-button",{attrs:{disabled:t.canSubmit,type:"info"},on:{click:t.doLogin}},[t._v("确认提交")])],1)],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"unit"},[s("span",{staticClass:"unit__span"},[t._v("上传身份证：")]),s("div",{staticClass:"unit__result unit__img-hint"},[t._v("需要上传正反两面清晰照片(请使用本地图片)")])])}],a=(s("7f7f"),s("a481"),s("ac6a"),s("d399")),o=(s("27ae"),{data:function(){return{showSchools:!1,showIdentities:!1,showEduBgs:!1,showGrades:!1,protocal:!1,identities:["请选择","在校生","教职工","非校内人员"],schools:["请选择","华南理工大学","中山大学","广东外语外贸大学","暨南大学","广州大学"],eduBackgrounds:["请选择","本科生","研究生","博士"],grades:["请选择","2012级","2013级","2014级","2015级","2016级","2017级","2018级","2019级","2020级","2021级","2022级"],schoolText:"请选择",identitiesText:"请选择",eduBgText:"请选择",gradeText:"请选择",enableSendCodeBtn:!1,codeHint:"发送验证码",agree:!0,idCardSrc1:"",idCardSrc2:"",personalCardSrc1:"",personalCardSrc2:"",result:{name:"",sex:"",identity:"",school:"",tel:"",code:"",idNumber:"",student_info:{eduBg:"",grade:"",studentID:"",studentCardFileList:[]},employee_info:{department:"",job:"",workNumber:"",workCardFileList:[]},other_info:{recName:"",recDepartment:"",recPhone:"",guarantCardFileList:[]},idcard1:"",idcard2:""},imgIDList:[],imgUserList:[]}},created:function(){var t=this;this.axios.get("/api/getKaoWuUserInfo").then(function(e){if(0==e.data.code){var i=e.data.data;null!==i&&i!==[]&&""!==i?t.$router.push({path:"/invigilator/examList"}):t.getSchoolInfo()}else t.message="网络错误，请刷新重试",t.centerImg=s("d5cd"),t.showCenterPopup=!0})},methods:{getSchoolInfo:function(){var t=this;this.axios.get("/api/schoollist").then(function(e){if(0==e.data.code){var s=[e.data.data,["请选择"]],i=s[0],n=s[1];i.forEach(function(t,e){n.push(t.school_name)}),t.schools=n}})},a:function(){console.log(this.result)},beforeRead:function(t){return"image/jpeg"===t.type||"image/png"===t.type||(Object(a["a"])("请上传 jpg/png 格式图片"),!1)},afterReadID:function(t){2===this.imgIDList.length&&this.postImgApi(1,1)},afterReadUser:function(t){2===this.imgUserList.length&&this.postImgApi(1,2)},postImgApi:function(t,e){var s=this,i=new FormData;if(1===e?i.append("imgfile",this.imgIDList[t-1].file):i.append("imgfile",this.imgUserList[t-1].file),this.axios.post("/api/tool/uploadimg",i).then(function(i){0===i.data.code&&(1===e?s["idCardSrc"+t]=i.data.data:2===e&&(s["personalCardSrc"+t]=i.data.data))}),!(t<2))return!1;t++,this.postImgApi(t,e)},showSchoolPopup:function(){this.showSchools=!0},showIdentityPopup:function(){this.showIdentities=!0},showEduBgPopup:function(){this.showEduBgs=!0},showGradePopup:function(){this.showGrades=!0},onSchoolConfirm:function(t,e){this.schoolText=this.schools[e],this.result.school=0===e?"":this.schools[e],this.showSchools=!1},onIdentityConfirm:function(t,e){return this.identitiesText=this.identities[e],this.result.identity=0===e?"":this.identities[e],this.showIdentities=!1,1===e?(this.result.student_info={eduBg:"",grade:"",studentID:"",studentCardFileList:[]},this.result.employee_info=null,void(this.result.other_info=null)):2===e?(this.result.student_info=null,this.result.employee_info={department:"",job:"",workNumber:"",workCardFileList:[]},void(this.result.other_info=null)):void(3===e&&(this.result.student_info=null,this.result.employee_info=null,this.result.other_info={recName:"",recDepartment:"",recPhone:"",guarantCardFileList:[]}))},onEduBgConfirm:function(t,e){this.eduBgText=this.eduBackgrounds[e],this.result.student_info.eduBg=0===e?"":this.eduBackgrounds[e],this.showEduBgs=!1},onGradeConfirm:function(t,e){this.gradeText=this.grades[e],this.result.student_info.grade=0===e?"":this.grades[e],this.showGrades=!1},sendCode:function(){var t=this,e=30;this.enableSendCodeBtn=!0,this.codeHint=e+"s后重试";var s=setInterval(function(){e--,0===e?(window.clearInterval(s),t.codeHint="发送验证码",t.enableSendCodeBtn=!1):t.codeHint=e+"s后重试"},1e3),i="/api/tool/telcode?tel="+this.result.tel;this.axios.get(i).then(function(e){e=e.data,0===e.code?t.$notify({message:"验证码发送成功"}):t.$notify(e.msg)}).catch(function(e){t.$notify("数据获取失败")})},beforeAvatarUpload:function(t){console.log("beforeAvatarUpload",t);var e="image/jpeg"===t.type||"image/png"===t.type;return!!e||(this.$message.error("只能上传png或jpg格式"),!1)},showProtocal:function(){this.protocal=!0},doLogin:function(){var t=this;"在校生"===this.result.identity&&(this.result.student_info.studentCardFileList.push(this.personalCardSrc1),this.result.student_info.studentCardFileList.push(this.personalCardSrc2)),"教职工"===this.result.identity&&(this.result.employee_info.workCardFileList.push(this.personalCardSrc1),this.result.employee_info.workCardFileList.push(this.personalCardSrc2)),"非校内人员"===this.result.identity&&(this.result.other_info.guarantCardFileList.push(this.personalCardSrc1),this.result.other_info.guarantCardFileList.push(this.personalCardSrc2)),this.result.idcard1=this.idCardSrc1,this.result.idcard2=this.idCardSrc2,this.axios.post("/api/kaowuuser/reg",this.result).then(function(e){e=e.data,0===e.code?(t.$router.replace({path:"/invigilator/examList"}),console.log("注册成功")):(console.log(e.msg),t.$notify(e.msg))}).catch(function(t){}),console.log(this.result)}},computed:{isNotAtSchool:function(){return"非校内人员"===this.result.identity?"推荐人":""},cardType:function(){switch(this.result.identity){case"教职工":return"上传职工证：";case"非校内人员":return"担保人证件：";default:return"上传学生证："}},canSubmit:function(){var t=this.result,e=this.result.student_info,s=this.result.employee_info,i=this.result.other_info,n=this.agree&&t.name.length&&t.sex.length&&t.identity.length&&t.school.length&&t.tel.length&&t.code.length&&t.idNumber.length&&this.idCardSrc1&&this.idCardSrc2&&this.personalCardSrc1&&this.personalCardSrc2;return!n||("在校生"===t.identity?!(e.eduBg.length&&e.grade.length&&e.studentID.length):"教职工"===t.identity?!(s.department.length&&s.job.length&&s.workNumber.length):"非校内人员"!==t.identity||!(i.recName.length&&i.recDepartment.length&&i.recPhone.length))},wait:function(){return!this.result.tel.length||this.enableSendCodeBtn}}}),r=o,l=(s("22a2"),s("2877")),u=Object(l["a"])(r,i,n,!1,null,"cff798e4",null);e["default"]=u.exports},"7f7f":function(t,e,s){var i=s("86cc").f,n=Function.prototype,a=/^\s*function ([^ (]*)/,o="name";o in n||s("9e1e")&&i(n,o,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(t){return""}}})},ac6a:function(t,e,s){for(var i=s("cadf"),n=s("0d58"),a=s("2aba"),o=s("7726"),r=s("32e9"),l=s("84f2"),u=s("2b4c"),c=u("iterator"),d=u("toStringTag"),p=l.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=n(h),_=0;_<m.length;_++){var v,f=m[_],g=h[f],C=o[f],w=C&&C.prototype;if(w&&(w[c]||r(w,c,p),w[d]||r(w,d,f),l[f]=p,g))for(v in i)w[v]||a(w,v,i[v],!0)}},d5cd:function(t,e,s){t.exports=s.p+"img/failure.1f677533.png"}}]);