(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["choice"],{"0a49":function(e,n,t){var i=t("9b43"),o=t("626a"),a=t("4bf8"),s=t("9def"),l=t("cd1c");e.exports=function(e,n){var t=1==e,c=2==e,r=3==e,u=4==e,h=6==e,d=5==e||h,f=n||l;return function(n,l,m){for(var p,g,v=a(n),x=o(v),b=i(l,m,3),_=s(x.length),y=0,S=t?f(n,_):c?f(n,0):void 0;_>y;y++)if((d||y in x)&&(p=x[y],g=b(p,y,v),e))if(t)S[y]=g;else if(g)switch(e){case 3:return!0;case 5:return p;case 6:return y;case 2:S.push(p)}else if(u)return!1;return h?-1:r||u?u:S}}},"0c69":function(e,n,t){"use strict";var i=t("10de"),o=t.n(i);o.a},"10de":function(e,n,t){},1169:function(e,n,t){var i=t("2d95");e.exports=Array.isArray||function(e){return"Array"==i(e)}},"456d":function(e,n,t){var i=t("4bf8"),o=t("0d58");t("5eda")("keys",function(){return function(e){return o(i(e))}})},"5eda":function(e,n,t){var i=t("5ca1"),o=t("8378"),a=t("79e5");e.exports=function(e,n){var t=(o.Object||{})[e]||Object[e],s={};s[e]=n(t),i(i.S+i.F*a(function(){t(1)}),"Object",s)}},7514:function(e,n,t){"use strict";var i=t("5ca1"),o=t("0a49")(5),a="find",s=!0;a in[]&&Array(1)[a](function(){s=!1}),i(i.P+i.F*s,"Array",{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),t("9c6c")(a)},"7f7f":function(e,n,t){var i=t("86cc").f,o=Function.prototype,a=/^\s*function ([^ (]*)/,s="name";s in o||t("9e1e")&&i(o,s,{configurable:!0,get:function(){try{return(""+this).match(a)[1]}catch(e){return""}}})},ac6a:function(e,n,t){for(var i=t("cadf"),o=t("0d58"),a=t("2aba"),s=t("7726"),l=t("32e9"),c=t("84f2"),r=t("2b4c"),u=r("iterator"),h=r("toStringTag"),d=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},m=o(f),p=0;p<m.length;p++){var g,v=m[p],x=f[v],b=s[v],_=b&&b.prototype;if(_&&(_[u]||l(_,u,d),_[h]||l(_,h,v),c[v]=d,x))for(g in i)_[g]||a(_,g,i[g],!0)}},cd1c:function(e,n,t){var i=t("e853");e.exports=function(e,n){return new(i(e))(n)}},e853:function(e,n,t){var i=t("d3f4"),o=t("1169"),a=t("2b4c")("species");e.exports=function(e){var n;return o(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)||(n=void 0),i(n)&&(n=n[a],null===n&&(n=void 0))),void 0===n?Array:n}},f031:function(e,n,t){"use strict";t.r(n);var i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container"},[t("el-input",{staticClass:"select school mt-1",attrs:{readonly:"",placeholder:"点击选择学校",disabled:""},on:{focus:function(n){e.show=!0}},model:{value:e.school_name,callback:function(n){e.school_name=n},expression:"school_name"}}),t("van-popup",{attrs:{position:"top"},model:{value:e.show,callback:function(n){e.show=n},expression:"show"}},[t("form",{attrs:{action:"/"}},[t("van-search",{attrs:{placeholder:"请输入学校名称","show-action":""},on:{search:e.getSchool,cancel:function(n){e.show=!1}},model:{value:e.search,callback:function(n){e.search=n},expression:"search"}})],1),t("van-cell-group",e._l(e.schoolOptions,function(n,i){return t("van-cell",{key:i,attrs:{value:n.label},on:{click:function(t){return e.changeSchool(n)}}})}),1)],1),t("el-select",{staticClass:"select",attrs:{disabled:null==e.school_id,label:e.exam_id,placeholder:"请选择科目"},on:{change:e.changeExam},model:{value:e.exam_name,callback:function(n){e.exam_name=n},expression:"exam_name"}},e._l(e.examOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),t("el-select",{staticClass:"select",attrs:{disabled:null==e.exam_id,placeholder:"请选择楼栋"},model:{value:e.building,callback:function(n){e.building=n},expression:"building"}},e._l(e.buildingOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),t("van-button",{staticClass:"btn-login",attrs:{type:"default",disabled:!e.school_id||!e.exam_id||!e.building},on:{click:e.seeMore}},[e._v("查看考场信息")])],1)},o=[],a=(t("7514"),t("7f7f"),t("386d"),t("ac6a"),t("456d"),t("2241")),s={name:"Choice",data:function(){return{schoolOptions:[],examOptions:[],buildingOptions:[],school_id:null,school_name:null,exam_id:null,exam_name:null,building:null,loading:!1,examInfo:null,show:!1,search:""}},created:function(){var e=this,n=this.$route.query;if(this.examInfo=this.$cookies.get("examInfo"),0!==Object.keys(n).length){var t=n.school_id,i=n.school_name,o=n.exam_id,s=(n.exam_name,{label:i,value:t});this.schoolOptions.push(s),this.school_id=t,this.school_name=i,this.exam_id=o,this.changeSchool()}else if(this.examInfo){var l={label:this.examInfo.school_name,value:this.examInfo.school_id};this.schoolOptions.push(l),this.school_id=this.examInfo.school_id,this.school_name=this.examInfo.school_name,this.changeSchool().then(function(){e.exam_id=e.examInfo.exam_id,e.changeExam(),e.building=e.examInfo.building})}else a["a"].alert({message:"请扫学校二维码进入!"}).then(function(){console.log("============"),e.$router.go(-1)})},watch:{search:function(){this.getSchool(this.search)}},methods:{getSchool:function(e){var n=this;if(console.log("getSchool query:",e),""!==e){this.loading=!0;var t="/api/exam/searchhall?hall="+e;this.axios.get(t).then(function(e){e=e.data,0===e.code?(n.loading=!1,n.schoolOptions=[],e.data&&e.data.forEach(function(e){var t={};t.label=e.school_name,t.value=e.school_id,n.schoolOptions.push(t)})):n.$notify(e.msg)}).catch(function(e){n.loading=!1,n.$notify("ERR: 学校数据获取失败")})}},changeSchool:function(e){var n=this;e&&(console.log(e),this.school_id=e.value,this.school_name=e.label,this.show=!1);var t="/api/exam/examlist?school_id="+this.school_id;return this.axios.get(t).then(function(e){e=e.data,0===e.code?(n.building=null,n.examOptions=[],e.data&&e.data.forEach(function(e){var t={};t.label=e.exam_name,t.value=e.exam_id,t.building_info=e.building_info,n.examOptions.push(t)}),null!==n.exam_id&&n.changeExam(n.exam_id)):n.$notify(e.msg)}).catch(function(e){n.$notify("ERR: 考试数据获取失败")})},changeExam:function(e){var n=this;this.building="",this.buildingOptions=[],this.exam_id=e;for(var t=0,i=this.examOptions.length;t<i;t++)parseInt(this.exam_id)===this.examOptions[t].value&&this.examOptions[t].building_info.forEach(function(e){var t={label:e.name,value:e.name,lat:e.lat,lng:e.lng};n.buildingOptions.push(t)})},seeMore:function(){var e=this,n=this.schoolOptions.find(function(n){return n.value===e.school_id}),t=this.examOptions.find(function(n){return n.value===parseInt(e.exam_id)}),i=this.buildingOptions.find(function(n){return n.value===e.building}),o={school_id:this.school_id,school_name:n.label,exam_id:this.exam_id,exam_name:t.label,building:this.building,loc:{lat:i.lat,lng:i.lng}};this.$cookies.set("examInfo",JSON.stringify(o),-1),this.$router.push({path:"/goods"})}}},l=s,c=(t("0c69"),t("2877")),r=Object(c["a"])(l,i,o,!1,null,"68d02d69",null);n["default"]=r.exports}}]);